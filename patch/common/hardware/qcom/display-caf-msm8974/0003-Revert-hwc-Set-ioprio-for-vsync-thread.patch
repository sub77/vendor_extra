From 7d786426fb04b4ca3866ca7083d7fd9ccf4a56fe Mon Sep 17 00:00:00 2001
From: sub77 <sub77@ymail.com>
Date: Fri, 12 Oct 2018 14:45:11 +0000
Subject: [PATCH 3/5] Revert "hwc: Set ioprio for vsync thread"

This reverts commit 8cc5b63841ffd72f2d93a42fd082dd759a2f93a4.
---
 libhwcomposer/Android.mk    | 3 +--
 libhwcomposer/hwc_vsync.cpp | 2 --
 2 files changed, 1 insertion(+), 4 deletions(-)

diff --git a/libhwcomposer/Android.mk b/libhwcomposer/Android.mk
index f44cb0a..365f0f4 100644
--- a/libhwcomposer/Android.mk
+++ b/libhwcomposer/Android.mk
@@ -12,8 +12,7 @@ LOCAL_C_INCLUDES              := $(common_includes) $(kernel_includes) \
 LOCAL_SHARED_LIBRARIES        := $(common_libs) libEGL liboverlay \
                                  libhdmi libqdutils libhardware_legacy \
                                  libdl libmemalloc libqservice libsync \
-                                 libbinder libmedia libskia libvirtual \
-                                 libbfqio_vendor
+                                 libbinder libmedia libskia libvirtual
 LOCAL_CFLAGS                  := $(common_flags) -DLOG_TAG=\"qdhwcomposer\"
 #Enable Dynamic FPS if PHASE_OFFSET is not set
 ifeq ($(VSYNC_EVENT_PHASE_OFFSET_NS),)
diff --git a/libhwcomposer/hwc_vsync.cpp b/libhwcomposer/hwc_vsync.cpp
index c8930f6..106f4f0 100644
--- a/libhwcomposer/hwc_vsync.cpp
+++ b/libhwcomposer/hwc_vsync.cpp
@@ -19,7 +19,6 @@
  */
 
 #include <cutils/properties.h>
-#include <bfqio/bfqio.h>
 #include <utils/Log.h>
 #include <fcntl.h>
 #include <sys/ioctl.h>
@@ -96,7 +95,6 @@ static void *vsync_loop(void *param)
     prctl(PR_SET_NAME, (unsigned long) &thread_name, 0, 0, 0);
     setpriority(PRIO_PROCESS, 0, HAL_PRIORITY_URGENT_DISPLAY +
                 android::PRIORITY_MORE_FAVORABLE);
-    android_set_rt_ioprio(0, 1);
 
     char vdata[MAX_DATA];
     //Number of physical displays
-- 
2.11.0

