From 24f999329dcf75036c07c97a9d48f198744468ed Mon Sep 17 00:00:00 2001
From: sub77 <sub77@ymail.com>
Date: Mon, 29 Oct 2018 12:59:54 +0000
Subject: [PATCH] Revert "[1/2] base: Fingerprint authentication vibration"

This reverts commit fdb2bea6d84b78fa4724aafab7859295624ec969.
---
 core/java/android/provider/Settings.java         | 16 ----------------
 .../server/fingerprint/ClientMonitor.java        |  6 +-----
 2 files changed, 1 insertion(+), 21 deletions(-)

diff --git a/core/java/android/provider/Settings.java b/core/java/android/provider/Settings.java
index 25766c96294..dc31252ec4e 100644
--- a/core/java/android/provider/Settings.java
+++ b/core/java/android/provider/Settings.java
@@ -4516,24 +4516,12 @@ public final class Settings {
         /**
          * @hide
          */
-
         public static final String OMNI_SHOW_CPU_OVERLAY = "show_cpu_overlay";
 
         /** @hide */
         private static final Validator OMNI_SHOW_CPU_OVERLAY_VALIDATOR =
                 BOOLEAN_VALIDATOR;
 
-        /**
-         * whether to enable or disable vibration on succesful fingerprint auth
-         *
-         * @hide
-         */
-        public static final String OMNI_FINGERPRINT_SUCCESS_VIB = "fingerprint_success_vib";
-
-        /** @hide */
-        private static final Validator OMNI_FINGERPRINT_SUCCESS_VIB_VALIDATOR =
-                BOOLEAN_VALIDATOR;
-
         /**
          * IMPORTANT: If you add a new public settings you also have to add it to
          * PUBLIC_SETTINGS below. If the new setting is hidden you have to add
@@ -4644,7 +4632,6 @@ public final class Settings {
             OMNI_BUTTON_BACKLIGHT_TIMEOUT,
             OMNI_BUTTON_BACKLIGHT_ON_TOUCH_ONLY,
             OMNI_SHOW_CPU_OVERLAY,
-            OMNI_FINGERPRINT_SUCCESS_VIB,
         };
 
         /**
@@ -4803,7 +4790,6 @@ public final class Settings {
             PRIVATE_SETTINGS.add(OMNI_BUTTON_BACKLIGHT_TIMEOUT);
             PRIVATE_SETTINGS.add(OMNI_BUTTON_BACKLIGHT_ON_TOUCH_ONLY);
             PRIVATE_SETTINGS.add(OMNI_SHOW_CPU_OVERLAY);
-            PRIVATE_SETTINGS.add(OMNI_FINGERPRINT_SUCCESS_VIB);
         }
 
         /**
@@ -4964,8 +4950,6 @@ public final class Settings {
                     OMNI_BUTTON_BACKLIGHT_ON_TOUCH_ONLY_VALIDATOR);
             VALIDATORS.put(OMNI_SHOW_CPU_OVERLAY,
                     OMNI_SHOW_CPU_OVERLAY_VALIDATOR);
-            VALIDATORS.put(OMNI_FINGERPRINT_SUCCESS_VIB,
-                    OMNI_FINGERPRINT_SUCCESS_VIB_VALIDATOR);
         }
 
         /**
diff --git a/services/core/java/com/android/server/fingerprint/ClientMonitor.java b/services/core/java/com/android/server/fingerprint/ClientMonitor.java
index ddca4e44aef..b935ba2a2ea 100644
--- a/services/core/java/com/android/server/fingerprint/ClientMonitor.java
+++ b/services/core/java/com/android/server/fingerprint/ClientMonitor.java
@@ -24,10 +24,8 @@ import android.hardware.fingerprint.IFingerprintServiceReceiver;
 import android.media.AudioAttributes;
 import android.os.IBinder;
 import android.os.RemoteException;
-import android.os.UserHandle;
 import android.os.VibrationEffect;
 import android.os.Vibrator;
-import android.provider.Settings;
 import android.util.Slog;
 
 import java.util.NoSuchElementException;
@@ -230,9 +228,7 @@ public abstract class ClientMonitor implements IBinder.DeathRecipient {
 
     public final void vibrateSuccess() {
         Vibrator vibrator = mContext.getSystemService(Vibrator.class);
-        boolean FingerprintVib = Settings.System.getIntForUser(mContext.getContentResolver(),
-                Settings.System.OMNI_FINGERPRINT_SUCCESS_VIB, 1, UserHandle.USER_CURRENT) == 1;
-        if (vibrator != null && FingerprintVib) {
+        if (vibrator != null) {
             vibrator.vibrate(mSuccessVibrationEffect, FINGERPRINT_SONFICATION_ATTRIBUTES);
         }
     }
-- 
2.17.2

