From 92f0b0feeac44d6824dc2d6b8cf6b81ca9ff19aa Mon Sep 17 00:00:00 2001
From: sub77 <sub77@ymail.com>
Date: Sun, 7 Oct 2018 06:29:58 +0000
Subject: [PATCH] ocreat

Change-Id: I51b37eb698c9751bb2bddd68fcb7f922e01c60cc
---
 debuggerd/tombstoned/tombstoned.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/debuggerd/tombstoned/tombstoned.cpp b/debuggerd/tombstoned/tombstoned.cpp
index 15ae40624..e5d62b1b8 100644
--- a/debuggerd/tombstoned/tombstoned.cpp
+++ b/debuggerd/tombstoned/tombstoned.cpp
@@ -112,7 +112,7 @@ class CrashQueue {
 
   std::pair<std::string, unique_fd> get_output() {
     std::string path;
-    unique_fd result(openat(dir_fd_, ".", O_WRONLY | O_APPEND | O_TMPFILE | O_CLOEXEC, 0640));
+    unique_fd result(openat(dir_fd_, ".", O_CREAT | O_WRONLY | O_APPEND | O_TMPFILE | O_CLOEXEC, 0640));
     if (result == -1) {
       // We might not have O_TMPFILE. Try creating with an arbitrary filename instead.
       static size_t counter = 0;
-- 
2.11.0

