From e171b6890d88ef116d8af286a3685372da399355 Mon Sep 17 00:00:00 2001
From: maxwen <max.weninger@gmail.com>
Date: Mon, 2 Oct 2017 13:01:41 +0200
Subject: [PATCH] sepolicy: tweak qcom policy

add all to public

Change-Id: Ia6366153799f72a90c151318028e0f8007d81b16
---
 Android.mk  | 23 -----------------------
 sepolicy.mk | 17 +++++++++++++++++
 2 files changed, 17 insertions(+), 23 deletions(-)
 delete mode 100644 Android.mk
 create mode 100644 sepolicy.mk

diff --git a/Android.mk b/Android.mk
deleted file mode 100644
index 2a9a7d9..0000000
--- a/Android.mk
+++ /dev/null
@@ -1,23 +0,0 @@
-# Board specific SELinux policy variable definitions
-ifeq ($(call is-vendor-board-platform,QCOM),true)
-LOCAL_PATH:= $(call my-dir)
-BOARD_SEPOLICY_DIRS := \
-       $(BOARD_SEPOLICY_DIRS) \
-       $(LOCAL_PATH) \
-       $(LOCAL_PATH)/common \
-       $(LOCAL_PATH)/ssg \
-       $(LOCAL_PATH)/$(TARGET_BOARD_PLATFORM)
-
-ifneq (,$(filter userdebug eng, $(TARGET_BUILD_VARIANT)))
-BOARD_SEPOLICY_DIRS += \
-       $(LOCAL_PATH)/test
-endif
-
-BOARD_PLAT_PUBLIC_SEPOLICY_DIR := \
-    $(BOARD_PLAT_PUBLIC_SEPOLICY_DIR) \
-    $(LOCAL_PATH)/public
-
-BOARD_PLAT_PRIVATE_SEPOLICY_DIR := \
-    $(BOARD_PLAT_PRIVATE_SEPOLICY_DIR) \
-    $(LOCAL_PATH)/private
-endif
diff --git a/sepolicy.mk b/sepolicy.mk
new file mode 100644
index 0000000..aab53ad
--- /dev/null
+++ b/sepolicy.mk
@@ -0,0 +1,17 @@
+# Board specific SELinux policy variable definitions
+BOARD_SEPOLICY_DIRS += \
+    device/qcom/sepolicy/public \
+    device/qcom/sepolicy/common \
+    device/qcom/sepolicy/ssg \
+    device/qcom/sepolicy/$(TARGET_BOARD_PLATFORM)
+
+ifneq (,$(filter userdebug eng, $(TARGET_BUILD_VARIANT)))
+BOARD_SEPOLICY_DIRS += \
+    device/qcom/sepolicy/test
+endif
+
+#BOARD_PLAT_PUBLIC_SEPOLICY_DIR += \
+    device/qcom/sepolicy/public
+
+#BOARD_PLAT_PRIVATE_SEPOLICY_DIR += \
+    device/qcom/sepolicy/private
-- 
1.8.3.1

