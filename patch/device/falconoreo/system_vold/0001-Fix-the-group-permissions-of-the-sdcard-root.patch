From 9455c285315ea730dfa4f080699d37c66056c834 Mon Sep 17 00:00:00 2001
From: Jani Lusikka <jani.lusikka@gmail.com>
Date: Fri, 25 Mar 2016 20:12:15 +0200
Subject: [PATCH] Fix the group permissions of the sdcard root.

If the root is not writable, we cannot create new files or folders there.

Change-Id: I3edad81f105bbeabc9dcd1f5322acea6fbfc63bb
---
 fs/Ext4.cpp | 2 +-
 fs/F2fs.cpp | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/fs/Ext4.cpp b/fs/Ext4.cpp
index 3c3b5b2..b356913 100644
--- a/fs/Ext4.cpp
+++ b/fs/Ext4.cpp
@@ -164,7 +164,7 @@ status_t Mount(const std::string& source, const std::string& target, bool ro,
 
     if (portable && rc == 0) {
         chown(c_target, AID_MEDIA_RW, AID_MEDIA_RW);
-        chmod(c_target, 0755);
+        chmod(c_target, 0775);
     }
 
     if (rc && errno == EROFS) {
diff --git a/fs/F2fs.cpp b/fs/F2fs.cpp
index 9ebe36d..ec75c3b 100644
--- a/fs/F2fs.cpp
+++ b/fs/F2fs.cpp
@@ -77,7 +77,7 @@ status_t Mount(const std::string& source, const std::string& target,
 
     if (portable && res == 0) {
         chown(c_target, AID_MEDIA_RW, AID_MEDIA_RW);
-        chmod(c_target, 0755);
+        chmod(c_target, 0775);
     }
 
     if (res != 0) {
-- 
2.1.2

